<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello React!</title>
    <script src="https://unpkg.com/react@15.4.1/dist/react.js"></script>
    <script src="https://unpkg.com/react-dom@15.4.1/dist/react-dom.js"></script>
    <script src="https://unpkg.com/babel-core@5.8.38/browser.min.js"></script>
  </head>
  <body>
    <div id="mountNode"></div>

    <script type="text/babel">
      var mountNode = document.getElementById('mountNode');

      class SearchComponent extends React.Component {
        constructor() {
          super();
          this.state = {query: ""};
          this.update = this.update.bind(this);
        }

        update() {
          this.props.onChange(this.input.value);
          this.setState({query: this.input.value})
        }

        render() {
          return (
            <div>
              <input ref={(input) => this.input = input} onChange={this.update} />
              <p>{this.state.query}</p>
              <p>{this.props.name}</p>
            </div>
          );
        }
      }

      class MainComponent extends React.Component {
        constructor() {
          super();
          this.state = {name: "John"};
          this.changeName = this.changeName.bind(this);
        }

        changeName() {
          this.setState({name: "Alice"});
          console.log(this.title);
        }

        logValue(value) {
          console.log(value);
        }

        render() {
          return (
            <div>
              <h1 style={{color: this.props.color ? this.props.color : 'red'}}
              onClick={this.changeName}
              ref={(title) => this.title = title }
              >
              Hello, {this.state.name} !
              </h1>
              <SearchComponent name={this.state.name} onChange={this.logValue} />
            </div>
          );
        }
      }

      ReactDOM.render(<MainComponent name="Jane" color="blue" />, mountNode);
    </script>
  </body>
</html>
